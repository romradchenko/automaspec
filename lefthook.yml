pre-commit:
    jobs:
        - name: db-check
          glob: 'db/schema/*.ts'
          run: pnpm dbc
          fail_text: '❌ Database schema validation failed'

        - name: format
          glob: '*.{ts,tsx,mts}'
          run: pnpm format {staged_files}
          stage_fixed: true
          fail_text: '❌ oxfmt failed'

        - name: lint
          glob: '*.{ts,tsx,mts}'
          run: pnpm lint {staged_files}
          stage_fixed: true
          fail_text: '❌ oxlint failed'

pre-push:
    parallel: true
    jobs:
      - name: typecheck
        glob: '*.{ts,tsx,mts}'
        run: pnpm typecheck
        fail_text: '❌ TypeScript type checking failed'

      - name: tests
        glob: '*.{ts,tsx,mts}'
        run: pnpm test run
        fail_text: '❌ Tests failed'

colors: true
